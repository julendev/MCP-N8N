[
{
  "name": "crear_oferta",
  "description": "Crea una o más ofertas nuevas. Se te pasará el cliente, el tipo, y los productos, crea una oferta Array de ofertas incluyendo los campos globales en cada una",
  "requires": ["cliente", "ofertas"],
  "optional": ["Address", "Shortname"],
  "structure": {
    "ofertas": {
      "requires": ["Tipo", "productos"],
      "optional": [
        "modelo",
        "TimeSubscription",
        "Edicion",
        "Nodos",
        "preguntas"
      ],
      "productos": {
        "type": "array",
        "element": {
          "requires": ["producto", "qty"],
          "optional": []
        }
      }
    }
  },
  "webhook": "https://digsilent.app.n8n.cloud/webhook/Crear"
},
{
  "name": "upgrade_oferta",
  "description": "Realiza una ampliación o mejora de una oferta ya existente para un cliente con contrato activo. Ideal para upgrades de edición, más nodos o funcionalidades.",
  "requires": ["ofertas"],
  "structure": {
    "ofertas": {
      "requires": ["cliente", "Tipo", "Contract ID", "productos"],
      "optional": [
        "Shortname",
        "Address",
        "modelo",
        "TimeSubscription",
        "Edicion",
        "Nodos",
        "preguntas"
      ],
      "productos": {
        "type": "array",
        "element": {
          "requires": ["producto", "qty"],
          "optional": []
        }
      }
    }
  },
  "webhook": "https://digsilent.app.n8n.cloud/webhook/Upgrade"
},
    {
  "name": "reply-email",
  "description": "Tras finalizar la tarea pedida, contesta al correo",
  "requires": ["conversationid"],
  "webhook": "https://digsilent.app.n8n.cloud/webhook/Reply"
},
  {
  "name": "modificar_mantenimiento",
  "description": "Modifica una oferta de mantenimiento de un cliente con contrato vigente",
  "requires": ["ofertas", "accion", "offerid", "conversationid"],
  "structure": {
    "ofertas": {
      "requires": ["productos"],
      "optional": [
        "Address",
        "modelo",
        "TimeSubscription",
        "Edicion",
        "Nodos",
        "productos",
        "preguntas"
      ],
      "productos": {
        "type": "array",
        "element": {
          "requires": ["producto", "qty"],
          "optional": [],
          "validations": {
            "qty": {
              "type": "number",
              "min": 1,
              "error": "qty no puede ser 0 ni menor a 1"
            }
          }
        }
      }
    }
  },
  "webhook": "https://digsilent.app.n8n.cloud/webhook/Modify"
}
]
